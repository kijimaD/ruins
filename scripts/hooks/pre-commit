#!/bin/sh
set -eu

################################################
# Git pre-commit hook - ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¨lintã‚’è‡ªå‹•å®Ÿè¡Œ
################################################

echo "ğŸ” Running pre-commit checks..."

# make fmtã‚’å®Ÿè¡Œ
echo "ğŸ“ Running make fmt..."
make fmt

# ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§å¤‰æ›´ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
if ! git diff --exit-code --quiet; then
    echo ""
    echo "âŒ Code formatting was applied. Please review and stage the changes:"
    echo ""
    git diff --name-only | while read -r file; do
        echo "  ğŸ“ $file"
    done
    echo ""
    echo "Run 'git add .' and commit again."
    exit 1
fi

exit 0
